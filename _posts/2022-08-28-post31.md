---
published: true
title: "MongoDB ê¸°ë³¸ ì¿¼ë¦¬ë¬¸ ì •ë¦¬"
excerpt: "ëª½ê³ ë””ë¹„ ê¸°ë³¸ ì¿¼ë¦¬ë¬¸ì„ ì •ë¦¬í•´ë³´ì•˜ìŠµë‹ˆë‹¤."

categories:
  - MongoDB
tags:
  - [ëª½ê³ ë””ë¹„, mongoDB, ì¿¼ë¦¬ë¬¸, DB]

# table of contents
toc: true
toc_sticky: true
---

### âœ”ï¸ MongoDB

MongoDBëŠ” NoSQLì´ë¼ ê³ ì •ëœ ìŠ¤í‚¤ë§ˆë‚˜ JOINì´ ì¡´ì¬í•˜ì§€ ì•Šê³  ë™ì  ìŠ¤í‚¤ë§ˆí˜• ë¬¸ì„œë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ëª½ê³ ë””ë¹„ì—ì„œëŠ” ê·¸ëŸ¬í•œ ë™ì  ìŠ¤í‚¤ë§ˆí˜• ë¬¸ì„œë¥¼ Binary JSON(JavaScript Object Notaion) ë¼ê³  ë¶€ë¦…ë‹ˆë‹¤.
JSON í˜•íƒœê¸° ë•Œë¬¸ì— ì§ê´€ì ì´ë¼ ê°œë°œì´ í¸ë¦¬í•˜ê³ , ì½ê¸° ë° ì“°ê¸° ì„±ëŠ¥ì´ ë›°ì–´ë‚˜ì„œ ì†ë„ê°€ ë§¤ìš° ë¹ ë¦…ë‹ˆë‹¤.

### âœ”ï¸ RDBì™€ MongoDB ìš©ì–´ ë¹„êµ

RDBì™€ MongoDB ìš©ì–´ë¥¼ ë¹„êµí•˜ëŠ” ê²½ìš° ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.

| RDB          | MongoDB         |
| ------------ | --------------- |
| Table        | Collection      |
| Row          | Document        |
| Column       | Field           |
| Primary Key  | Object_Id Field |
| Relationship | Embedded & Link |

### âœ”ï¸ ì—°ì‚°ì ì •ë¦¬

#### ğŸ‘‰ ë¹„êµì—°ì‚°ì

| operator | ì„¤ëª…                                                     |
| -------- | -------------------------------------------------------- |
| &eq      | ê°™ìŒ (==)                                                |
| &gt      | ì´ˆê³¼ (>)                                                 |
| &gte     | ì´ìƒ (>=)                                                |
| &lt      | ë¯¸ë§Œ (<)                                                 |
| &lte     | ì´í•˜ (<=)                                                |
| &ne      | ê°™ì§€ ì•ŠìŒ (!=)                                           |
| &in      | ì „ë‹¬í•œ ë°°ì—´ ìš”ì†Œì¤‘ í•˜ë‚˜                                  |
| &nin     | ì „ë‹¬í•œ ë°°ì—´ ìš”ì†Œì¤‘ì— ì—†ê±°ë‚˜ í•„ë“œê°€ ì¡´ì¬í•˜ì§€ ì•Šì„ ë•Œ ì¡°íšŒ |

#### ğŸ‘‰ ë…¼ë¦¬ì—°ì‚°ì

| operator | ì„¤ëª…                                          |
| -------- | --------------------------------------------- |
| &or      | ì£¼ì–´ì§„ ì¡°ê±´ ì¤‘ í•˜ë‚˜ë¼ë„ trueì¸ ê²½ìš° true ë°˜í™˜ |
| &and     | ëª¨ë“  ì¡°ê±´ì´ true ì´ë©´ true ë°˜í™˜               |
| &not     | í•´ë‹¹ ì¡°ê±´ì´ false ì´ë©´ true ë°˜í™˜              |
| &nor     | ëª¨ë“  ì¡°ê±´ì´ false ì´ë©´ true ë°˜í™˜              |

### âœ”ï¸ ì¿¼ë¦¬ ì •ë¦¬

> MongoDB ë°ì´í„°ë² ì´ìŠ¤ ë° ì»¬ë ‰ì…˜ ë¬¸ë²•ì— ëŒ€í•œ ë‚´ìš©ì€ [ê´€ë ¨ í¬ìŠ¤íŒ…](https://ilimes.github.io/mongodb/post18/ "mongoDB") ì„ ì°¸ê³ í•´ì£¼ì„¸ìš” :)

#### ğŸ‘‰ documents ì¡°íšŒ(find)

```
> db.<collection ì´ë¦„>.find()
```

##### ì…ë ¥ key&value ê°’ì„ ê°€ì§„ docsë§Œ ë¦¬í„´

```
> db.<collection ì´ë¦„>.find({ "books" : "Gravity" })
```

##### viewsì˜ ê°’ì´ 30ì´í•˜ì¸ docsë§Œ ë¦¬í„´

```
> db.<collection ì´ë¦„>.find({ "views" : {$lte:30} })
```

##### ì¿¼ë¦¬ ê²°ê³¼ì— ë³´ì—¬ì¤„ fieldì§€ì •

```
> db.<collection ì´ë¦„>.find({},{ "\_id" : false, "title" : true })
```

##### commentsì˜ nameì´ë¼ëŠ” fieldì˜ valueê°€ Charlesì¸ docsë§Œ ì¶œë ¥

- $elemMatch : embedded doct ë°°ì—´ ì¿¼ë¦¬ì‹œ ì‚¬ìš©

```
> db.<collection ì´ë¦„>.find({ "comments" : {$elemMatch : { "name" : "Charles" }}})
```

##### ë³´ê¸°ì¢‹ê²Œ ì •ë ¬: pretty()

```
> db.cities.find({ "name" : "Minneapolis" }).pretty()
```

##### ì˜¤ë¦„ì°¨ìˆœ & ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬: sort()

- name fieldë¥¼ ë‚´ë¦¼ì°¨ìˆœìœ¼ë¡œ ì •ë ¬í•˜ì—¬ ì¶œë ¥

```
> db.<collection ì´ë¦„>.find({},{ "name" : true }).sort({ "name" : -1 })
```

- \_id fieldë¥¼ ë‚´ë¦¼ì°¨ìˆœìœ¼ë¡œ ì •ë¦¬í•˜ê³ , name fieldë¥¼ ì˜¤ë¦„ì°¨ìˆœìœ¼ë¡œ ì •ë ¬í•˜ì—¬ ì¶œë ¥

```
> db.<collection ì´ë¦„>.find({},{ "name" : true }).sort({ "\_id" : -1 , "name" : 1 }}
```

##### 5ê°œ docsë§Œ ì¶œë ¥

```
> db.<collection ì´ë¦„>.find().limit(5)
```

##### 2ê°œë¥¼ ê±´ë„ˆë›°ê³  ê·¸ ë‹¤ìŒ docsë¥¼ ì¶œë ¥

```
> db.<collection ì´ë¦„>.find().skip(2)
```

#### ğŸ‘‰ ë°ì´í„° ì—…ë°ì´íŠ¸

##### INSERT í•˜ê¸°

```
> db.people.insert( [
    { name: "Abet", age: 19 },
    { name: "Betty", age: 20 },
    { name: "Charlie", age: 23, skills: [ "mongodb", "nodejs"] },
    { name: "David", age: 23, score: 20 }
])
```

##### íŠ¹ì • field ì—…ë°ì´íŠ¸ í•˜ê¸°: $set

```
> db.people.update( { name: "Abet" }, { $set: { age: 20 } } )
> WriteResult({ "nMatched" : 1, "nUpserted" : 0, "nModified" : 1 })
```

##### íŠ¹ì • field ì œê±°í•˜ê¸°: $unset

```
> db.people.update( { name: "David" }, { $unset: { score: 1 } } )
> WriteResult({ "nMatched" : 1, "nUpserted" : 0, "nModified" : 1 })
```

##### fieldê°€ ìˆìœ¼ë©´ ìˆ˜ì •, ì—†ìœ¼ë©´ ìƒˆë¡œ ì¶”ê°€í•˜ê¸° : upsert:true

```
> db.people.update( { name: "Elly" }, { name: "Elly", age: 17 }, { upsert: true } )
WriteResult({
  "nMatched" : 0,
  "nUpserted" : 1,
  "nModified" : 0,
  "_id" : ObjectId("56c893ffc694e4e7c8594240")
})
```

##### íŠ¹ì • ì¡°ê±´ì— ë§ëŠ” field í•œêº¼ë²ˆì— ìˆ˜ì •í•˜ê¸°: multi:true

```
> db.people.update(
  { age: { $lte: 20 } },
  { $set: { score: 10 } },
  { multi: true }
  )
> WriteResult({ "nMatched" : 3, "nUpserted" : 0, "nModified" : 0 })
```

##### skills ë°°ì—´ì— ìƒˆë¡œìš´ ê°’ ì¶”ê°€í•˜ê¸°: $push

```
> db.people.update(
  { name: "Charlie" },
  { $push: { skills: "angularjs" } }
  )
WriteResult({ "nMatched" : 1, "nUpserted" : 0, "nModified" : 1 })
```

##### skills ë°°ì—´ì— ì—¬ëŸ¬ ê°’ ì¶”ê°€í•˜ê³  ì˜¤ë¦„ì°¨ìˆœìœ¼ë¡œ ì •ë ¬í•˜ê¸°: $each, $sort

```
> db.people.update(
  { name: "Charlie" },
  { $push: {
      skills: {
          $each: [ "c++", "java" ],
          $sort: 1
      }
    }
  }
  )
> WriteResult({ "nMatched" : 1, "nUpserted" : 0, "nModified" : 1 })
```

##### skills ë°°ì—´ì— í•˜ë‚˜ì˜ ìš”ì†Œ ì œê±°: $pull

```
> db.people.update(
  { name: "Charlie" },
  { $pull: { skills: "mongodb" } }
 )
```

#### ğŸ‘‰ ì»¤ìŠ¤í…€ ì¸ë±ìŠ¤ ì¶”ê°€

##### ì´ë¯¸ ì¡´ì¬í•˜ëŠ” collection ì— ì¶”ê°€í•  ê²½ìš°

```
> db.products.createIndex(
  { item: 1, quantity: -1 } ,
  { name: "query for inventory" }
)
```

##### ì¸ë±ìŠ¤ ì¢…ë¥˜ ì¿¼ë¦¬

```
> db.cities.getIndexes()
[
  {
    "v" : 2,
    "key" : {
      "_id" : 1
    },
    "name" : "_id_",
    "ns" : "test.cities"
  },
  {
    "v" : 2,
    "key" : {
      "_id" : 1,
      "checkins" : -1
    },
    "name" : "_id_1_checkins_-1",
    "background" : true,
    "ns" : "test.cities"
  },
  {
    "v" : 2,
    "key" : {
      "geolocation" : "2dsphere",
      "_id" : 1,
      "checkins" : -1
    },
    "name" : "geolocation_2dsphere__id_1_checkins_-1",
    "ns" : "test.cities",
    "background" : true,
    "2dsphereIndexVersion" : 3
  }...
```

##### new schema, field ë ˆë²¨ ì—ì„œ ì¶”ê°€

```
 var animalSchema = new Schema({
 	name: String,
    type: String,
    tags: { type: [String], index: true } // animalì˜ tagë¥¼ ì¸ë±ìŠ¤ë¡œ ì§€ì •
  });
```

##### new schema, compound indexëŠ” í•­ìƒ schema ë ˆë²¨ì—ì„œ ì¶”ê°€í•˜ê¸°

```
 animalSchema.index({ name: 1, type: -1 }); // schema level
```

### âœ”ï¸ ì°¸ê³  ì‚¬ì´íŠ¸

<https://velopert.com/479>
<https://www.mongodb.com/docs/manual/reference/operator/query/>  
<https://velog.io/@rosewwross/MongoDB-%EC%B4%88%EA%B8%B0%EC%84%A4%EC%A0%95-%EB%B0%8F-%EC%BF%BC%EB%A6%AC%EB%AC%B8-%EC%A0%95%EB%A6%AC>

{:.notice--success}
ğŸ””**í¬ìŠ¤íŒ… ê³µì§€**  
ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ ì…ë‹ˆë‹¤.  
ì˜ëª»ëœ ë¶€ë¶„ì´ ìˆì„ ì‹œ ë©”ì¼ì´ë‚˜ ëŒ“ê¸€ë¡œ ì§€ì í•´ì£¼ì‹œë©´ ê°ì‚¬ë“œë¦¬ê² ìŠµë‹ˆë‹¤ :)
